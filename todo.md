# Things to do

## Get a decent create command started

- Figure out a better system for dealing with hosts (find out how symfony deals with this - if they have a similar tool)
  - i.e. we don't want to be asking for peoples' passwords.
  - Looks at other similar projects
    - There was one showcased at stripecon I think?
      - Turns out that was literally just https://github.com/silverstripe/silverstripe-serve
      - [Laravel valet](https://laravel.com/docs/10.x/valet) was also mentioned. Looks like that's nginx so that's a non-starter
    - Drupal probably has something similar
      - Drupal just uses the PHP built-in server bound to a local port
    - Symfony probably has something similar
      - Symfony cli binds ports by default.
      - Has a proxy for using hostname: https://symfony.com/doc/current/setup/symfony_server.html#setting-up-the-local-proxy
      - Should be really easy to do something similar.
- Auto-generated SSL cert (and make sure we have an SSL and a non-SSL port? Does symfony do that?)
- Make a main docker image, which has most if not all of the stuff the current one has
- Consider taking a more common php base for it?
- Have a per-project image that uses the main one in "FROM: " directive
  - In the future this will be stored in dockerhub
  - We'll have a `--local-docker-image` or similar option to build it locally instead.
- Set the docker starting php version in the per-project docker image. That way `docker compose down && docker compose up -d` will give a container with the correct PHP version.
- Sort out clean output that respects symfony/console's verbosity
- Use https://github.com/icanhazstring/symfony-console-spinner (or similar) as a better "something is happening" output
  - Consider finding out how to do things async, then we can just have this running (and have multiple of this running!) separately from the output coming through for it, and we can have something like "nothing has happened for x seconds, something might have gone wrong" after like 30 seconds or so of no output prompting a change.
  - We could also update the time counter without updating the spinner, so the time counter is _always_ going up, but it only spins when there's output.
- Get rid of all the PR stuff
  - Keep the fork stuff. You can then have a `--forked-dependency` or similar option and make it add the forks to the composer.json like it would for `--pr` with `--pr-has-deps`
- Don't have the suffix as part of the environment dir name
  - Also rename that to something like `environmentId`
  - Or better yet, find a way to do away with it altogether
    - Main reasons it's there is for predictable IP address (see better way to do hosts above) and predictable port for db
    - hosts solution hopefully takes care of IP address need.
    - it would be nice to have a single central phpmyadmin or similar which handles all of the containers without needing the port on the host.
- Have logs/, docker/, etc dirs in `.ss-dev-starter-kit/` dir in project root
  - Add that dir to the .gitignore if it's not there already
  - See if you can use a name in `.ss-dev-starter-kit/docker/.env` so you don't have to suffix the docker dir name
- Add db option for sqlite3
- Add warning when postgres or sqlite3 is chosen
  - blah blah not commercially supported blah blah database commands may not work as expected
- When there's an error that results in not being able to do the thing, output the error message in a clean error format before rolling back
  - For that matter, put most things (if not everything) in a clean try/finally - on finally, if we weren't successful ask "Something went wrong. Do you want to keep the project folder for debugging?" (or just rollback without asking)
- Don't do the first composer install if we have forks or additional modules
  - instead, `create-project` must have `--no-install`, as should each `require` statement.
  - Do a final `composer install` after everything is finally settled (unless `--no-install` is in compsoer args option)
- Add a clean command shortcut system
  - e.g. `starterkit composer` is a shortcut for `starterkit docker:exec composer`
  - has a divider in `starterkit list` called "command shortcuts" similar to the "env" or "docker" dividers
  - `starterkit help composer` works in an expected way (i.e. shows description for the shortcut with the appropriate args/options)
